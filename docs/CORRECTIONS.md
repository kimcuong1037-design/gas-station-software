# 修正记录 (Corrections Log)

本文件记录每次用户对 AI 输出的修正，包括背景、原因分析和经验总结。
遵循 CONSTITUTION.md 原则六。

---

## 修正记录格式

```
### [日期] 修正标题
- **修正内容：** 具体修改了什么
- **原因分析：** 为什么原来的输出不对/不够好
- **经验总结：** 从中学到了什么，以后如何避免
```

---

## 记录

### 2026-02-07 PLAN.md 需要拆分为多个独立文件

- **修正内容：** 用户指出 PLAN.md 不应作为单一文件，需要拆分为至少三个独立部分：规范文件、项目计划文件、Agent 使用计划文件
- **原因分析：** 原始 PLAN.md 将规范、计划、实施方法混在一起，不利于独立维护和引用。不同关注点的内容应该分离，便于不同角色和阶段使用
- **经验总结：** 项目文档应遵循关注点分离原则。规范类文档（不常变）、计划类文档（随进度更新）、工具/流程类文档（按需调整）应各自独立管理

### 2026-02-07 需求拆解 Skill 缺少颗粒度定义

- **修正内容：** 用户指出 requirement-decomposition.md 缺少对拆解颗粒度的明确定义。增加了四级层级结构（L1 子系统 → L2 功能模块 → L3 功能 → L4 功能点/原子功能），并强调了拆解原则：忠实拆分、不发挥、不添加不存在的信息、适度颗粒度、每个功能点可用一个测试用例验收
- **原因分析：** 原始 Skill 文件中直接使用"功能点"一词但未定义其颗粒度标准，导致拆解结果可能过粗或过细。缺少层级定义也使得需求文档的结构（子系统→模块→功能→功能点）与拆解产出之间的映射关系不清晰。更重要的是，缺少"忠实拆分"的约束，Agent 可能会自行发挥添加需求文档中不存在的功能
- **经验总结：**
  1. Skill 定义中涉及"拆解"类操作时，必须明确定义输出的颗粒度标准和层级结构
  2. 必须明确约束 Agent 的行为边界——特别是"只能做什么"和"不能做什么"
  3. 拆解产出与下游 Skill（如 user-story-writing）的衔接关系需要在定义中显式说明

### 2026-02-07 引入 knowledge-base 行业知识库，所有 Skill 需引用

- **修正内容：** 用户创建了 `knowledge-base/` 目录用于存放行业基础知识和背景信息，并指出：(1) 所有 Skill 都应将 knowledge-base 中的文件作为输入引用；(2) `requirements/加气站软件市场调研.html` 应迁移到 knowledge-base 目录下。据此迁移了文件，并更新了 3 个 P0 Skill 文件和所有引用该文件路径的文档
- **原因分析：** 原始设计中将市场调研放在 requirements 目录，但市场调研属于行业背景知识而非直接需求。更重要的是，Skill 定义中缺少对行业知识的引用，Agent 在执行需求分析等任务时缺乏行业上下文，可能导致分析结果脱离行业实际
- **经验总结：**
  1. 行业知识/背景资料与需求文档应分开管理——requirements 存放直接需求，knowledge-base 存放行业背景
  2. 所有 Skill 都应考虑是否需要行业知识作为上下文输入，特别是分析类和设计类 Skill
  3. 项目目录结构的调整应同步更新所有引用路径，避免断链

---

*创建时间：2026-02-07*
